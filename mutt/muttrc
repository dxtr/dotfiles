set folder="~/mail"
source ~/.mutt/mailboxes

set use_from=yes
set tmpdir="~/.mutt/temp"
set editor=`echo \$EDITOR`
set mbox_type=Maildir
set spoolfile="+INBOX"
set record="+Sent"

unset record
set postponed="+Drafts"
set ssl_force_tls=yes
unset imap_passive
set imap_check_subscribed
set mail_check=60
set timeout=10
set alias_file="~/.mutt/alias"
set certificate_file="~/.mutt/certificates"
set mailcap_path="~/.mutt/mailcap"
set signature="~/.mutt/sig"
set header_cache="~/.mutt/hcache"
set message_cachedir="~/.mutt/mcache"
set net_inc=5
set wait_key=no
set timeout=3
set mail_check=0
set beep_new
set pipe_decode
set thorough_search
set send_charset="utf-8"
set sort=threads
set sort_aux=reverse-last-date-received
set move=no
set markers=no
set pager_index_lines= 5

set sidebar_delim='] '
set sidebar_visible=yes
set sidebar_width=30

macro index K ":push <sidebar-prev><sidebar-open><enter>"
macro index J ":push <sidebar-next><sidebar-open><enter>"

set status_on_top=yes
set status_chars=" *%A"
set status_format="───[ Folder: %f ]───[%r%m messages%?n? (%n new)?%?d? (%d to delete)?%?t? (%t tagged)? ]───%>─%?p?( %p postponed )?───"

ignore *
unignore from: to: cc: date: subject:
unhdr_order *
hdr_order from: to: cc: date: subject:

macro index <F8> \
      "<enter-command>unset wait_key<enter><shell-escape>notmuch-mutt --prompt search<enter><change-folder-readonly>~/.cache/mutt/search<enter>" \
      "search mail (using notmuch)"
macro index <F9> \
      "<enter-command>unset wait_key<enter><pipe-message>notmuch-mutt thread<enter><change-folder-readonly>~/.cache/mutt/search<enter><enter-command>set wait_key<enter>" \
      "search and reconstruct owning thread (using notmuch)"

bind index <left> sidebar-prev
bind index <right> sidebar-next
bind index <space> sidebar-open

color indicator brightred black
color status green default
color tree white default
color tilde brightmagenta default
color attachment white default
color bold white default
color error brightred default
color markers brightred white
color message brightred default
color search white default
color normal white default
color hdrdefault cyan default
color quoted blue default
color signature black default
color index blue default ~F # flagged
color index brightred white ~N # new

# GnuPG configuration
set pgp_decode_command="gpg --status-fd=2 %?p?--passphrase-fd 0? --no-verbose --quiet --batch --output - %f"
set pgp_verify_command="gpg --status-fd=2 --no-verbose --quiet --batch --output - --verify %s %f"
set pgp_decrypt_command="gpg --status-fd=2 %?p?--passphrase-fd 0? --no-verbose --quiet --batch --output - %f"
set pgp_sign_command="gpg --no-verbose --batch --quiet --output - %?p?--passphrase-fd 0? --armor --detach-sign --textmode %?a?-u %a? %f"
set pgp_clearsign_command="gpg --no-verbose --batch --quiet --output - %?p?--passphrase-fd 0? --armor --textmode --clearsign %?a?-u %a? %f"
set pgp_encrypt_only_command="pgpewrap gpg --batch --quiet --no-verbose --output - --encrypt --textmode --armor --always-trust --encrypt-to 0xB3D7B795 -- -r %r -- %f"
set pgp_encrypt_sign_command="pgpewrap gpg %?p?--passphrase-fd 0? --batch --quiet --no-verbose --textmode --output - --encrypt --sign %?a?-u %a? --armor --always-trust --encrypt-to 0xB3D7B795 -- -r %r -- %f"
set pgp_import_command="gpg --no-verbose --import %f"
set pgp_export_command="gpg --no-verbose --export --armor %r"
set pgp_verify_key_command="gpg --verbose --batch --fingerprint --check-sigs %r"
set pgp_list_pubring_command="gpg --no-verbose --batch --quiet --with-colons --list-keys %r" 
set pgp_list_secring_command="gpg --no-verbose --batch --quiet --with-colons --list-secret-keys %r" 
set pgp_good_sign="^\\[GNUPG:\\] GOODSIG"
set pgp_sign_as=0x46726B9A
set pgp_timeout=1800
set pgp_autosign=no
set smime_is_default=no
#set crypt_autosign
set crypt_replysign
#set crypt_autoencrypt=yes
#set crypt_replyencrypt=yes
set crypt_replysignencrypted=yes
set crypt_verify_sig=yes
message-hook '!~g !~G ~b "^-----BEGIN PGP (SIGNED )?MESSAGE"' 'exec check-traditional-pgp'

#my_hdr X-PGP-Key: 
